# currency-exchange-api
## ü™ô API –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç ‚Äî FastAPI –ø—Ä–æ–µ–∫—Ç

## üìÑ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ—Å—Ç–æ–µ **–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç**, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –Ω–∞ **FastAPI**.
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:
- –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ **JWT**);
- –ø–æ–ª—É—á–∞—Ç—å **–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç** –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ API;
- –≤—ã–ø–æ–ª–Ω—è—Ç—å **–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤–∞–ª—é—Ç** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏;
- –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å **—Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–ª—é—Ç**.

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å [Currency Data API (apilayer.com)](https://apilayer.com/marketplace/currency_data-api), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –æ –∫—É—Ä—Å–∞—Ö –≤–∞–ª—é—Ç.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ endpoints/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currency.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ currency.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ external_api.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_endpoints.py
‚îÇ   ‚îî‚îÄ‚îÄ test_models.py
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ pyproject.toml
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ requirements.txt
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
git clone https://github.com/TigranAko/currency-exchange-api.git
cd currency-exchange-api
```

### 2Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
python -m venv venv
source venv/bin/activate        # –î–ª—è Linux/Mac
venv\Scripts\activate         # –î–ª—è Windows

pip install -r requirements.txt
```

### 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ `.env`
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç—É–¥–∞ —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```env
API_KEY=your_apilayer_api_key
API_URL=https://api.apilayer.com/currency_data
JWT_SECRET=your_jwt_secret_key
JWT_ALGORITHM=HS256
TOKEN_EXPIRE_MINUTES=30
```

### 4Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
uvicorn main:app --reload
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
üëâ [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

---

## üîí –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **JWT-—Ç–æ–∫–µ–Ω** –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤.
–ü–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –≤—Ö–æ–¥.

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
**POST** `/auth/register/`

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "username": "testuser",
  "password": "12345"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "message": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω"
}
```

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
**POST** `/auth/login/`

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "username": "testuser",
  "password": "12345"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI...",
}
```

---

## üí± –ö–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ API

### 1Ô∏è‚É£ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–∞–ª—é—Ç
**GET** `/currency/list/`
(–¢—Ä–µ–±—É–µ—Ç—Å—è JWT-—Ç–æ–∫–µ–Ω)

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "currencies": {
    "USD": "United States Dollar",
    "EUR": "Euro",
    "GBP": "British Pound Sterling",
    "JPY": "Japanese Yen"
  }
}
```

---

### 2Ô∏è‚É£ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã
**GET** `/currency/exchange/?base=USD&target=EUR`
(–¢—Ä–µ–±—É–µ—Ç—Å—è JWT-—Ç–æ–∫–µ–Ω)

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "base": "USD",
  "target": "EUR",
  "rate": 0.9273,
  "date": "2025-11-02"
}
```

---

### 3Ô∏è‚É£ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç
**POST** `/currency/convert/`
(–¢—Ä–µ–±—É–µ—Ç—Å—è JWT-—Ç–æ–∫–µ–Ω)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "base": "USD",
  "target": "JPY",
  "amount": 100
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "base": "USD",
  "target": "JPY",
  "amount": 100,
  "converted_amount": 15023.5
}
```

---

## üß∞ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------------|------------|
| **FastAPI** | Backend-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **Pydantic** | –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö |
| **authx** | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **Requests** | –†–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º API |
| **Python-dotenv** | –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| **Uvicorn** | ASGI-—Å–µ—Ä–≤–µ—Ä |
| **pytest** | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:
```bash
pytest -v
```

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
- –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ JWT (authx);
- –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–µ–º—É API (–º–æ–∫-—Ç–µ—Å—Ç—ã);
- –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤–∞–ª—é—Ç.

---

## üìò –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (curl)

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```bash
curl -X POST http://127.0.0.1:8000/auth/register/ \
-H "Content-Type: application/json" \
-d '{"username": "user1", "password": "pass1"}'
```

### –í—Ö–æ–¥
```bash
curl -X POST http://127.0.0.1:8000/auth/login/ \
-H "Content-Type: application/json" \
-d '{"username": "user1", "password": "pass1"}'
```

### –°–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç
```bash
curl -X GET http://127.0.0.1:8000/currency/list/ \
-H "Authorization: Bearer <—Ç–æ–∫–µ–Ω>"
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
```bash
curl -X POST http://127.0.0.1:8000/currency/convert/ \
-H "Authorization: Bearer <—Ç–æ–∫–µ–Ω>" \
-H "Content-Type: application/json" \
-d '{"base": "USD", "target": "EUR", "amount": 10}'
```

---

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `aiohttp`;
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (PostgreSQL + SQLAlchemy);
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç;
- [ ] –°–æ–∑–¥–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –∏ docker-compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

**–ò–º—è:** *–¢–∏–≥—Ä–∞–Ω*
**–§–∞–º–∏–ª–∏—è:** *–ê–∫–æ–ø—è–Ω*
**Email:** *tigranakopyan2007.ru@gmail.com*
**GitHub:** *https://github.com/TigranAko/*
